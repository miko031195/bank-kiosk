<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Kredit √∂d…ôni≈üi</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <style>
    :root {
      --primary: #1a73e8;
      --primary-dark: #0b4abf;
      --on-primary: #ffffff;
      --surface: rgba(255, 255, 255, 0.96);
      --surface-variant: rgba(244, 246, 252, 0.95);
      --text: #0f172a;
      --muted: #64748b;
      --border: rgba(148, 163, 184, 0.28);
      --radius-lg: 28px;
      --radius-md: 20px;
      --shadow: 0 28px 60px rgba(15, 23, 42, 0.22);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Roboto', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(160deg, #111827 0%, #1d4ed8 55%, #38bdf8 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px;
    }

    .app-frame {
      width: 100%;
      max-width: 1240px;
      background: var(--surface);
      border-radius: 32px;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      backdrop-filter: blur(26px);
      border: 1px solid rgba(255, 255, 255, 0.45);
    }

    .app-bar {
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 26px 32px;
      background: linear-gradient(95deg, rgba(26, 115, 232, 0.92), rgba(59, 130, 246, 0.88));
      color: #fff;
    }

    .icon-btn {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      font-size: 24px;
      font-weight: 600;
      display: grid;
      place-items: center;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.2s ease;
    }

    .icon-btn:hover {
      background: rgba(255, 255, 255, 0.28);
    }

    .icon-btn:active {
      transform: translateY(1px);
    }

    .bar-text h1 {
      margin: 0;
      font-size: 30px;
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .bar-text p {
      margin: 6px 0 0;
      font-size: 14px;
      opacity: 0.85;
    }

    .printer-pill {
      margin-left: auto;
      background: rgba(255, 255, 255, 0.2);
      padding: 10px 18px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      letter-spacing: 0.02em;
    }

    .printer-pill.success {
      background: rgba(16, 185, 129, 0.24);
      color: #064e3b;
    }

    .printer-pill.error {
      background: rgba(248, 113, 113, 0.25);
      color: #7f1d1d;
    }

    .app-body {
      display: flex;
      gap: 28px;
      padding: 32px;
    }

    .card {
      background: var(--surface-variant);
      border-radius: var(--radius-lg);
      padding: 30px 34px;
      box-shadow: 0 20px 55px rgba(15, 23, 42, 0.12);
      border: 1px solid var(--border);
    }

    .flow-card {
      flex: 1.6;
      display: flex;
      flex-direction: column;
      gap: 28px;
      background: rgba(255, 255, 255, 0.9);
    }

    .summary-card {
      flex: 0.9;
      display: flex;
      flex-direction: column;
      gap: 22px;
      background: linear-gradient(180deg, rgba(244, 247, 252, 0.92), rgba(255, 255, 255, 0.98));
    }

    .flow-step {
      background: rgba(244, 246, 252, 0.92);
      border-radius: var(--radius-md);
      padding: 24px 26px;
      border: 1px solid rgba(148, 163, 184, 0.2);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.6);
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .divider {
      height: 1px;
      background: rgba(148, 163, 184, 0.28);
      margin: -6px 0;
    }

    .step-head {
      display: flex;
      align-items: flex-start;
      gap: 16px;
    }

    .badge {
      width: 42px;
      height: 42px;
      border-radius: 14px;
      background: var(--primary);
      color: var(--on-primary);
      font-weight: 700;
      font-size: 18px;
      display: grid;
      place-items: center;
      box-shadow: 0 12px 24px rgba(26, 115, 232, 0.35);
    }

    .step-head h2 {
      margin: 0;
      font-size: 21px;
      font-weight: 700;
      color: var(--text);
    }

    .step-head p {
      margin: 6px 0 0;
      font-size: 14px;
      color: var(--muted);
    }

    .form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .grid2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 12px;
    }

    .input {
      flex: 1;
      padding: 16px 18px;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      font-size: 17px;
      background: #fff;
      transition: border 0.2s ease, box-shadow 0.2s ease;
    }

    .input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.18);
      outline: none;
    }

    .btn {
      border: none;
      border-radius: 18px;
      padding: 16px 20px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: transform 0.12s ease, box-shadow 0.18s ease;
    }

    .btn.primary {
      background: var(--primary);
      color: var(--on-primary);
      box-shadow: 0 18px 30px rgba(26, 115, 232, 0.35);
    }

    .btn.primary:hover {
      box-shadow: 0 20px 38px rgba(26, 115, 232, 0.45);
    }

    .btn.ghost {
      background: rgba(26, 115, 232, 0.08);
      color: var(--primary);
      border: 1px solid rgba(26, 115, 232, 0.18);
    }

    .btn.secondary {
      background: rgba(15, 23, 42, 0.08);
      color: var(--text);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
      box-shadow: none;
    }

    .quick-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    #paymentStatus {
      min-height: 68px;
    }

    .numpad {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
    }

    .key {
      padding: 18px 0;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.38);
      background: #fff;
      font-weight: 700;
      font-size: 22px;
      cursor: pointer;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.12);
      transition: transform 0.12s ease, box-shadow 0.18s ease;
    }

    .key:active {
      transform: scale(0.97);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.12);
    }

    .status {
      padding: 16px 18px;
      border-radius: 18px;
      margin-top: 12px;
      font-weight: 600;
      border: 1px solid transparent;
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08);
    }

    .status.info {
      background: rgba(59, 130, 246, 0.1);
      color: #1d4ed8;
      border-color: rgba(59, 130, 246, 0.25);
    }

    .status.success {
      background: rgba(34, 197, 94, 0.12);
      color: #166534;
      border-color: rgba(34, 197, 94, 0.28);
    }

    .status.error {
      background: rgba(248, 113, 113, 0.12);
      color: #7f1d1d;
      border-color: rgba(248, 113, 113, 0.28);
    }

    .muted {
      color: var(--muted);
      font-size: 14px;
    }

    .section-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .kpi {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }

    .box {
      background: rgba(255, 255, 255, 0.92);
      border-radius: 18px;
      padding: 18px 20px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08);
    }

    .box h4 {
      margin: 0 0 8px;
      font-size: 14px;
      color: var(--muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .box .v {
      font-size: 20px;
      font-weight: 700;
      color: var(--text);
    }

    .credit-wrapper {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 12px;
    }

    .table th {
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
      text-align: left;
      padding: 0 12px;
    }

    .table td {
      background: #fff;
      border: 1px solid rgba(148, 163, 184, 0.32);
      padding: 16px 14px;
      font-size: 15px;
      color: var(--text);
    }

    .table tr td:first-child {
      border-radius: 16px 0 0 16px;
      width: 56px;
      text-align: center;
    }

    .table tr td:last-child {
      border-radius: 0 16px 16px 0;
    }

    .table input[type="radio"] {
      width: 20px;
      height: 20px;
      accent-color: var(--primary);
    }

    .summary-grid {
      display: grid;
      gap: 18px;
    }

    .summary-item {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 18px 20px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .summary-item .label {
      font-size: 13px;
      color: var(--muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .summary-item .value {
      font-size: 22px;
      font-weight: 700;
      color: var(--text);
    }

    .summary-note {
      margin-top: auto;
      font-size: 14px;
      color: var(--muted);
      background: rgba(59, 130, 246, 0.12);
      padding: 16px 18px;
      border-radius: 18px;
      border: 1px solid rgba(59, 130, 246, 0.24);
    }

    .footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 32px 32px;
    }

    .footer .muted {
      font-size: 13px;
    }

    @media (max-width: 1100px) {
      body {
        padding: 24px;
      }

      .app-frame {
        border-radius: 26px;
      }

      .app-bar {
        flex-direction: column;
        align-items: flex-start;
      }

      .printer-pill {
        margin-left: 0;
      }

      .app-body {
        flex-direction: column;
      }

      .summary-card {
        order: -1;
      }
    }

    @media (max-width: 640px) {
      body {
        padding: 16px;
      }

      .app-bar {
        padding: 22px;
      }

      .bar-text h1 {
        font-size: 24px;
      }

      .app-body {
        padding: 22px;
      }

      .card {
        padding: 22px 20px;
      }

      .flow-step {
        padding: 20px;
      }

      .quick-actions {
        gap: 8px;
      }

      .summary-item .value {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="app-frame">
    <header class="app-bar">
      <button type="button" class="icon-btn" id="btnAppBack" aria-label="Geri">
        ‚Üê
      </button>
      <div class="bar-text">
        <h1>Kredit √∂d…ôni≈üi</h1>
        <p>ID/FIN + Doƒüum tarixi ‚Üí kredit se√ß ‚Üí m…ôbl…ôƒü ‚Üí √∂d…ôni≈ü</p>
      </div>
      <div class="printer-pill" id="printerStatusPill">Printer yoxlanƒ±lƒ±r...</div>
    </header>

    <main class="app-body">
      <section class="card flow-card" id="stage">
        <div class="flow-step">
          <div class="step-head">
            <span class="badge">1</span>
            <div>
              <h2>M√º≈üt…ôri identifikasiyasƒ±</h2>
              <p>ƒ∞D/FIN v…ô doƒüum tarixi daxil edin</p>
            </div>
          </div>
          <form class="form" id="formId">
            <input class="input" id="custId" placeholder="M√º≈üt…ôri ID-si v…ô ya FIN kod" autocomplete="off" />
            <div class="row">
              <input class="input" id="dob" type="date" placeholder="Doƒüum tarixi" />
              <button type="submit" class="btn primary" id="btnLookup">Axtar</button>
            </div>
            <div class="muted">* ∆èn azƒ± bir ID/FIN + doƒüum tarixi t…ôl…ôb olunur</div>
          </form>
        </div>

        <div class="divider"></div>

        <div class="flow-step">
          <div class="step-head">
            <span class="badge">2</span>
            <div>
              <h2>Kredit se√ßimi</h2>
              <p>Uyƒüun m√ºqavil…ôni se√ßin</p>
            </div>
          </div>
          <div id="custSummary" class="muted">M√º≈üt…ôri tapƒ±lmadƒ±. M…ôlumatlarƒ± daxil edin v…ô "Axtar".</div>
          <div id="creditsWrap" class="credit-wrapper" style="display:none">
            <div class="kpi">
              <div class="box"><h4>Ad, Soyad</h4><div class="v" id="fullName">‚Äî</div></div>
              <div class="box"><h4>Kreditl…ôrin sayƒ±</h4><div class="v" id="kCount">0</div></div>
            </div>
            <div class="section-label">M√∂vcud kreditl…ôr</div>
            <table class="table" id="tblCredits">
              <thead>
                <tr><th></th><th>M√ºqavil…ô</th><th>Bank</th><th>Qalƒ±q (‚Çº)</th><th>Gecikm…ô</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="divider"></div>

        <div class="flow-step">
          <div class="step-head">
            <span class="badge">3</span>
            <div>
              <h2>√ñd…ôni≈ü</h2>
              <p>M…ôbl…ôƒüi daxil edin v…ô t…ôsdiql…ôyin</p>
            </div>
          </div>
          <form class="form" id="formPay" style="display:none">
            <div class="grid2">
              <input class="input" id="amount" type="number" min="1" step="0.01" placeholder="M…ôbl…ôƒü (‚Çº)" required />
              <input class="input" id="note" placeholder="Qeyd (ist…ôy…ô baƒülƒ±)" />
            </div>
            <div class="quick-actions">
              <button type="button" class="btn ghost" id="btnPayAll">Tam borcu √∂d…ô</button>
              <button type="button" class="btn ghost" id="btn5">+5 ‚Çº</button>
              <button type="button" class="btn ghost" id="btn10">+10 ‚Çº</button>
              <button type="button" class="btn ghost" id="btn50">+50 ‚Çº</button>
            </div>
            <div class="numpad" id="numpad">
              <button type="button" class="key">1</button>
              <button type="button" class="key">2</button>
              <button type="button" class="key">3</button>
              <button type="button" class="key">4</button>
              <button type="button" class="key">5</button>
              <button type="button" class="key">6</button>
              <button type="button" class="key">7</button>
              <button type="button" class="key">8</button>
              <button type="button" class="key">9</button>
              <button type="button" class="key">00</button>
              <button type="button" class="key">0</button>
              <button type="button" class="key" data-del>‚å´</button>
            </div>
            <div id="paymentStatus"></div>
            <div class="row">
              <button type="button" class="btn secondary" id="btnBack">‚Üê Geri</button>
              <button type="submit" class="btn primary" id="btnPay">√ñd…ôni≈üi t…ôsdiql…ô</button>
            </div>
          </form>
        </div>
      </section>

      <aside class="card summary-card">
        <div class="step-head">
          <span class="badge">4</span>
          <div>
            <h2>M…ôlumat x√ºlas…ôsi</h2>
            <p>Son d…ôf…ô yoxlayƒ±n</p>
          </div>
        </div>
        <div class="summary-grid">
          <div class="summary-item">
            <span class="label">Se√ßil…ôn kredit</span>
            <span class="value" id="selContract">‚Äî</span>
          </div>
          <div class="summary-item">
            <span class="label">√ñd…ônilm…ôli m…ôbl…ôƒü</span>
            <span class="value" id="due">‚Äî</span>
          </div>
          <div class="summary-item">
            <span class="label">Ad, Soyad</span>
            <span class="value" id="namePreview">‚Äî</span>
          </div>
          <div class="summary-item">
            <span class="label">Bank</span>
            <span class="value" id="bankName">‚Äî</span>
          </div>
        </div>
        <div class="summary-note">Qeyd: Naƒüd √∂d…ôni≈ü avadanlƒ±ƒüƒ± v…ô printer inteqrasiyasƒ± aktivdir.</div>
      </aside>
    </main>

    <footer class="footer">
      <div>
        <button class="btn ghost" id="btnFooterBack">‚Üê Ana s…ôhif…ô</button>
      </div>
      <div class="muted">Terminal ‚Ññ 2312 ‚Ä¢ D…ôst…ôk: 8 800 250 57 57</div>
    </footer>
  </div>

  <script>
    // ============================================
    // KONFIQURASIYA
    // ============================================
    const PRINTER_BASE_URL = "http://10.66.66.63:5555";
    const HARDWARE_BASE_URL = "http://10.66.66.63:8080";
    const PRINTER_ID = 1;

    // ============================================
    // DEBUG FUNKSIYASI
    // ============================================
    function addDebug(message) {
      const timestamp = new Date().toLocaleTimeString('az-AZ');
      console.log(`[${timestamp}] ${message}`);
    }

    function updatePrinterStatusPill(state, message) {
      const pill = document.getElementById('printerStatusPill');
      if (!pill) return;

      pill.textContent = message;
      pill.classList.remove('success', 'error');

      if (state === 'success') {
        pill.classList.add('success');
      } else if (state === 'error') {
        pill.classList.add('error');
      }
    }

    function navigateHome() {
      addDebug('Ana s…ôhif…ôy…ô geri d√∂n√º≈ü t…ôl…ôbi');
      window.location.href = 'index.html';
    }

    // ============================================
    // DEMO VERIL∆èNL∆èR BAZASI
    // ============================================
    const MOCK_DB = {
      "A12345|8Q9ABCD|1990-05-20": { 
        fullName: "R…ô≈üad Quliyev", 
        credits: [
          { contract: "CR-2021-001", bank: "HALAL-P Bank", due: 258.40, overdue: "0 g√ºn" },
          { contract: "CR-2022-145", bank: "HALAL-P Bank", due: 1320.00, overdue: "5 g√ºn" }
        ] 
      },
      "98210|3DF7K2L|1987-01-10": { 
        fullName: "K√∂n√ºl M…ômm…ôdova", 
        credits: [
          { contract: "CR-2019-778", bank: "HALAL-P Bank", due: 75.00, overdue: "0 g√ºn" }
        ] 
      }
    };

    // ============================================
    // M√ú≈ûT∆èRƒ∞ AXTARI≈ûI
    // ============================================
    function findCustomer(idOrFin, dob) {
      return Object.keys(MOCK_DB)
        .map(k => ({ k, parts: k.split('|') }))
        .find(({ parts }) => (parts[0] === idOrFin || parts[1] === idOrFin) && parts[2] === dob);
    }

    // ============================================
    // PRINTER STATUSU YOXLAMASI
    // ============================================
    async function checkPrinterStatus(printerId = PRINTER_ID) {
      try {
        addDebug('Printer statusu yoxlanƒ±lƒ±r...');

        const response = await fetch(`${PRINTER_BASE_URL}/api/getPrintStatus`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id: printerId })
        });
        
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const result = await response.json();
        addDebug(`Printer status cavabƒ±: ${JSON.stringify(result)}`);

        if (result.isSuccess) {
          const dataStatus = typeof result.data === 'string' ? result.data : '';

          if (dataStatus === "Printer Normal") {
            addDebug('‚úì Printer hazƒ±rdƒ±r');
            updatePrinterStatusPill('success', 'Printer hazƒ±rdƒ±r');
            return { success: true };
          }

          const message = dataStatus || result.errorMsg || 'Printer problemi';
          updatePrinterStatusPill('error', message);
          return { success: false, message };
        }

        const message = result.errorMsg || 'Printer statusu alƒ±nmadƒ±';
        updatePrinterStatusPill('error', message);
        return { success: false, message };
      } catch (error) {
        addDebug(`‚úó Printer status x…ôtasƒ±: ${error.message}`);
        updatePrinterStatusPill('error', error.message);
        return { success: false, message: error.message };
      }
    }

    // ============================================
    // Q∆èBZ √áAP FUNKSIYASI (ƒ∞STEHSAL√áI FORMATI)
    // ============================================
    async function printReceipt(receiptData, printerId = PRINTER_ID) {
      try {
        addDebug("√áek √ßap edilir...");

        const currentDate = new Date();
        const dateStr = currentDate.toLocaleDateString('az-AZ');
        const timeStr = currentDate.toLocaleTimeString('az-AZ', { hour: '2-digit', minute: '2-digit' });

        const templateContent = buildTemplateReceipt(receiptData, dateStr, timeStr);

        const templateAttempt = await sendPrinterPayload({
          id: Number(printerId),
          type: "template",
          encoding: "UTF-8",
          data: templateContent
        }, 'template');

        if (templateAttempt.success) {
          return { success: true };
        }

        if (shouldFallbackToPlainText(templateAttempt)) {
          addDebug('Template formatƒ± q…ôbul edilm…ôdi, adi m…ôtn formatƒ±na ke√ßilir...');

          const plainContent = buildPlainReceipt(receiptData, dateStr, timeStr);
          const plainAttempt = await sendPrinterPayload({
            id: Number(printerId),
            type: "string",
            data: plainContent
          }, 'string');

          if (plainAttempt.success) {
            await sendPrinterPayload({
              id: Number(printerId),
              type: "cut",
              data: "half"
            }, 'cut');

            return { success: true };
          }

          const plainMessage = plainAttempt.message || plainAttempt.error || '√áek √ßap edilm…ôdi';
          return { success: false, error: plainMessage };
        }

        const message = templateAttempt.message || templateAttempt.error || '√áek √ßap edilm…ôdi';
        return { success: false, error: message };
      } catch (error) {
        addDebug(`√áek √ßap x…ôtasƒ±: ${error.message}`);
        return { success: false, error: error.message };
      }
    }

    function normalizeToTurkishCharset(text) {
      if (typeof text !== 'string' || !text) {
        return text;
      }

      const map = {
        '…ô': 'e',
        '∆è': 'E',
        '√§': 'a',
        '√Ñ': 'A',
        '√∂': '√∂',
        '√ñ': '√ñ',
        '√º': '√º',
        '√ú': '√ú',
        'ƒ±': 'ƒ±',
        'ƒ∞': 'ƒ∞',
        'ƒü': 'ƒü',
        'ƒû': 'ƒû',
        '≈ü': '≈ü',
        '≈û': '≈û',
        '√ß': '√ß',
        '√á': '√á'
      };

      return text.replace(/[∆è…ô√Ñ√§√ñ√∂√ú√ºƒ∞ƒ±ƒûƒü≈û≈ü√á√ß]/g, ch => map[ch] || ch);
    }

    function buildTemplateReceipt(receiptData, dateStr, timeStr) {
      let content = "";
      content += "#cmd_fs_l\n#cmd_ta_c\nHALAL-P BANK\n";
      content += "#cmd_fs_m\n#cmd_ta_c\nKredit √ñd…ôni≈ü Q…ôbzi\nNardaran filialƒ±\n";
      content += "#cmd_sep_equal\n";
      content += "#cmd_ta_l\n#cmd_fs_s\n";
      content += `Tarix: ${dateStr}\n`;
      content += `Saat: ${timeStr}\n`;
      content += "#cmd_sep_hyphen\n";
      content += "#cmd_fs_m\n#cmd_ta_l\nM√ú≈ûT∆èRƒ∞:\n";
      content += "#cmd_fs_s\n";
      content += `Ad: ${receiptData.customer}\n`;
      content += `M√ºqavil…ô: ${receiptData.contract}\n`;
      content += `Bank: ${receiptData.bank}\n`;
      content += "#cmd_sep_hyphen\n";
      content += "#cmd_fs_m\n#cmd_ta_l\n√ñD∆èNƒ∞≈û:\n";
      content += "#cmd_fs_s\n";
      content += `M…ôbl…ôƒü: ${receiptData.paid.toFixed(2)} AZN\n`;
      content += "N√∂v: Naƒüd\n";

      if (receiptData.note && receiptData.note.trim()) {
        content += `Qeyd: ${receiptData.note}\n`;
      }

      if (receiptData.transaction_id) {
        const shortTxId = receiptData.transaction_id.substring(0, 18);
        content += `Tranzaksiya ID: ${shortTxId}\n`;
      }

      content += "#cmd_sep_equal\n";
      content += "#cmd_fs_s\n#cmd_ta_c\n";
      content += "Terminal ‚Ññ 2312 ‚Ä¢ Nardaran\n";
      content += "T…ô≈ü…ôkk√ºr edirik!\n";
      content += "#cmd_lf_2\n";
      content += "#cmd_cut_\n";

      return normalizeToTurkishCharset(content);
    }

    function buildPlainReceipt(receiptData, dateStr, timeStr) {
      const lines = [];
      lines.push('HALAL-P BANK');
      lines.push('Kredit √ñd…ôni≈ü Q…ôbzi');
      lines.push('==============================');
      lines.push(`Tarix: ${dateStr}`);
      lines.push(`Saat: ${timeStr}`);
      lines.push('------------------------------');
      lines.push(`M√º≈üt…ôri: ${receiptData.customer}`);
      lines.push(`M√ºqavil…ô: ${receiptData.contract}`);
      lines.push(`Bank: ${receiptData.bank}`);
      lines.push('------------------------------');
      lines.push(`√ñd…ônil…ôn m…ôbl…ôƒü: ${receiptData.paid.toFixed(2)} AZN`);
      lines.push('√ñd…ôni≈ü n√∂v√º: Naƒüd');

      if (receiptData.note && receiptData.note.trim()) {
        lines.push(`Qeyd: ${receiptData.note.trim()}`);
      }

      if (receiptData.transaction_id) {
        lines.push(`Tranzaksiya ID: ${receiptData.transaction_id.substring(0, 18)}`);
      }

      lines.push('==============================');
      lines.push('Terminal ‚Ññ 2312 ‚Ä¢ Nardaran');
      lines.push('T…ô≈ü…ôkk√ºr edirik!');

      return normalizeToTurkishCharset(lines.join('\n'));
    }

    async function sendPrinterPayload(payload, label) {
      try {
        const shortPreview = typeof payload.data === 'string'
          ? `${payload.data.substring(0, 80)}${payload.data.length > 80 ? '‚Ä¶' : ''}`
          : '';
        addDebug(`Printer…ô ${label} sorƒüusu g√∂nd…ôrilir (${JSON.stringify({ ...payload, data: undefined })}) :: ${shortPreview}`);

        const response = await fetch(`${PRINTER_BASE_URL}/api/printSetting`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const raw = await response.text();
        const trimmed = raw ? raw.trim() : '';
        let parsed = null;

        if (trimmed) {
          try {
            parsed = JSON.parse(trimmed);
          } catch (parseError) {
            addDebug(`Printer ${label} cavabƒ± JSON deyil: ${trimmed}`);
          }
        }

        if (detectPrinterSuccess(parsed, trimmed)) {
          addDebug(`Printer ${label} cavabƒ± uƒüurludur${trimmed ? `: ${trimmed}` : ' (bo≈ü cavab)'}`);
          return { success: true, parsed, raw: trimmed };
        }

        const message = extractPrinterMessage(parsed, trimmed) || `Printer ${label} cavabƒ± uƒüursuz oldu`;
        addDebug(`Printer ${label} uƒüursuz: ${message}`);
        return { success: false, parsed, raw: trimmed, message };
      } catch (error) {
        addDebug(`Printer ${label} x…ôtasƒ±: ${error.message}`);
        return { success: false, error: error.message };
      }
    }

    function detectPrinterSuccess(parsed, rawText) {
      if (parsed) {
        if (parsed.isSuccess === true || parsed.success === true) {
          return true;
        }

        if (parsed.isSuccess === false || parsed.success === false) {
          return false;
        }

        if (typeof parsed.status === 'string' && /success|printed|ok/i.test(parsed.status)) {
          return true;
        }

        if (typeof parsed.data === 'string' && /success|printed|ok/i.test(parsed.data)) {
          return true;
        }

        if (parsed.errorCode === 200 && parsed.errorMsg == null) {
          return true;
        }
      }

      if (!rawText) {
        return true;
      }

      return /success|printed|ok/i.test(rawText);
    }

    function extractPrinterMessage(parsed, rawText) {
      if (parsed) {
        if (typeof parsed.errorMsg === 'string' && parsed.errorMsg.trim()) {
          return parsed.errorMsg.trim();
        }

        if (typeof parsed.message === 'string' && parsed.message.trim()) {
          return parsed.message.trim();
        }

        if (typeof parsed.data === 'string' && parsed.data.trim() && !/success|printed|ok/i.test(parsed.data)) {
          return parsed.data.trim();
        }
      }

      if (rawText) {
        return rawText;
      }

      return null;
    }

    function shouldFallbackToPlainText(result) {
      if (!result || result.success) {
        return false;
      }

      if (result.parsed && result.parsed.errorCode === 501) {
        return true;
      }

      const messages = [
        result.message,
        result.error,
        result.raw,
        result.parsed && typeof result.parsed.errorMsg === 'string' ? result.parsed.errorMsg : null,
        result.parsed && typeof result.parsed.message === 'string' ? result.parsed.message : null,
        result.parsed && typeof result.parsed.data === 'string' ? result.parsed.data : null
      ].filter(Boolean).join(' ').toLowerCase();

      if (!messages) {
        return false;
      }

      return messages.includes('invalid format') ||
        messages.includes('param format') ||
        messages.includes('template not support') ||
        messages.includes('template not supported');
    }

    // ============================================
    // NAƒûD √ñD∆èNƒ∞≈û PROSESƒ∞
    // ============================================
    async function processPayment(amount) {
      const statusDiv = document.getElementById('paymentStatus');
      const btnPay = document.getElementById('btnPay');
      
      try {
        btnPay.disabled = true;
        statusDiv.innerHTML = '<div class="status info">‚è≥ √ñd…ôni≈ü avadanlƒ±ƒüƒ± il…ô …ôlaq…ô qurulur...</div>';
        
        addDebug(`√ñd…ôni≈ü ba≈üladƒ±: ${amount.toFixed(2)} AZN`);
        
        // Hardware API-y…ô √∂d…ôni≈ü sorƒüusu
        const paymentResp = await fetch(`${HARDWARE_BASE_URL}/api/payment`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ amount: amount.toFixed(2) })
        });
        
        if (!paymentResp.ok) {
          throw new Error(`Hardware API x…ôtasƒ±: ${paymentResp.status}`);
        }
        
        const respData = await paymentResp.json();
        addDebug(`Hardware cavab: ${JSON.stringify(respData)}`);
        
        // UUID/Transaction ID …ôld…ô et
        let uuid = respData.data?.uuid || respData.uuid || respData.transaction_id;
        if (!uuid) {
          throw new Error("UUID/Transaction ID alƒ±nmadƒ±");
        }
        
        addDebug(`Transaction UUID: ${uuid}`);
        statusDiv.innerHTML = `<div class="status info">üíµ Z…ôhm…ôt olmasa ${amount.toFixed(2)} AZN naƒüd daxil edin...</div>`;
        
        // Status yoxlanƒ±≈üƒ± (polling)
        return new Promise((resolve, reject) => {
          let checkCount = 0;
          const maxChecks = 300; // 5 d…ôqiq…ô (300 saniy…ô)
          
          const interval = setInterval(async () => {
            checkCount++;
            
            if (checkCount > maxChecks) {
              clearInterval(interval);
              reject(new Error("√ñd…ôni≈ü vaxtƒ± bitdi (5 d…ôqiq…ô)"));
              return;
            }
            
            try {
              const stResp = await fetch(`${HARDWARE_BASE_URL}/api/query`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ uuid })
              });
              
              if (!stResp.ok) {
                throw new Error(`Status API x…ôtasƒ±: ${stResp.status}`);
              }
              
              const stData = await stResp.json();
              const st = stData.data || stData;
              
              let status = st.info?.status || st.status || "unknown";
              let paidAmount = Number(st.info?.pay_amount || st.paid || 0);
              
              addDebug(`Status yoxlanƒ±≈üƒ± #${checkCount}: ${status}, √ñd…ônil…ôn: ${paidAmount}`);
              
              // √ñd…ôni≈ü tamamlandƒ±
              if (status === "completed" || status === "payment is completed") {
                if (paidAmount >= amount) {
                  clearInterval(interval);
                  addDebug(`‚úì √ñd…ôni≈ü tamamlandƒ±: ${paidAmount.toFixed(2)} AZN`);
                  resolve({ success: true, uuid: uuid, paid: paidAmount });
                } else {
                  statusDiv.innerHTML = `<div class="status error">‚ö† Kifay…ôt etmir! √ñd…ônil…ôn: ${paidAmount.toFixed(2)} AZN / Lazƒ±m: ${amount.toFixed(2)} AZN</div>`;
                }
              } 
              // X…ôta statuslarƒ±
              else if (["error", "jam", "full", "reject", "cancelled", "timeout"].includes(status)) {
                clearInterval(interval);
                addDebug(`‚úó Avadanlƒ±q x…ôtasƒ±: ${status}`);
                reject(new Error(`Avadanlƒ±q x…ôtasƒ±: ${status}`));
              } 
              // G√∂zl…ôm…ô statuslarƒ±
              else if (["waiting", "pending", "accepting", "paying", "processing"].includes(status)) {
                if (paidAmount > 0) {
                  const remaining = amount - paidAmount;
                  statusDiv.innerHTML = `<div class="status info">üí∞ Daxil edildi: ${paidAmount.toFixed(2)} AZN<br>üìä Qalan: ${remaining.toFixed(2)} AZN</div>`;
                } else {
                  statusDiv.innerHTML = `<div class="status info">‚è≥ Pul g√∂zl…ônilir... Lazƒ±m olan m…ôbl…ôƒü: ${amount.toFixed(2)} AZN</div>`;
                }
              }
            } catch (e) {
              addDebug(`‚ö† Status yoxlanƒ±≈ü x…ôtasƒ±: ${e.message}`);
            }
          }, 1000); // H…ôr saniy…ô yoxla
        });
        
      } catch (error) {
        addDebug(`‚úó √ñd…ôni≈ü x…ôtasƒ±: ${error.message}`);
        statusDiv.innerHTML = `<div class="status error">‚úó X…ôta: ${error.message}</div>`;
        btnPay.disabled = false;
        throw error;
      }
    }

    // ============================================
    // GLOBAL STATE
    // ============================================
    let CURRENT = { customer: null, selected: null };

    // ============================================
    // DOM ELEMENTL∆èRI
    // ============================================
    const el = (id) => document.getElementById(id);
    const formId = el('formId');
    const formPay = el('formPay');

    // ============================================
    // 1. M√ú≈ûT∆èRƒ∞ AXTARI≈ûI
    // ============================================
    formId.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const id = el('custId').value.trim();
      const dob = el('dob').value;
      
      if (!id || !dob) {
        alert('‚ö† Z…ôhm…ôt olmasa ID/FIN v…ô doƒüum tarixini daxil edin');
        return;
      }

      addDebug(`M√º≈üt…ôri axtarƒ±lƒ±r: ID=${id}, DOB=${dob}`);
      
      el('custSummary').innerHTML = '<div class="skeleton" style="height:20px;width:60%"></div>';
      await new Promise(r => setTimeout(r, 600)); // Simulyasiya

      const found = findCustomer(id, dob);
      
      if (!found) {
        addDebug('‚úó M√º≈üt…ôri tapƒ±lmadƒ±');
        el('custSummary').textContent = '‚úó M√º≈üt…ôri tapƒ±lmadƒ±. M…ôlumatlarƒ± yenid…ôn yoxlayƒ±n.';
        el('creditsWrap').style.display = 'none';
        formPay.style.display = 'none';
        CURRENT = { customer: null, selected: null };
        updateSummary();
        return;
      }
      
      const data = MOCK_DB[found.k];
      CURRENT.customer = data;
      
      addDebug(`‚úì M√º≈üt…ôri tapƒ±ldƒ±: ${data.fullName}, ${data.credits.length} kredit`);
      
      el('custSummary').textContent = '';
      el('creditsWrap').style.display = 'block';
      el('fullName').textContent = data.fullName;
      el('kCount').textContent = data.credits.length;

      const tbody = el('tblCredits').querySelector('tbody');
      tbody.innerHTML = '';
      
      data.credits.forEach((c, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><input type="radio" name="credit" value="${idx}"></td>
          <td>${c.contract}</td>
          <td>${c.bank}</td>
          <td>${c.due.toFixed(2)}</td>
          <td>${c.overdue}</td>`;
        tbody.appendChild(tr);
      });

      formPay.style.display = 'none';
      CURRENT.selected = null;
      updateSummary();
    });

    // ============================================
    // 2. KREDƒ∞T SE√áƒ∞Mƒ∞
    // ============================================
    document.addEventListener('change', (e) => {
      if (e.target && e.target.name === 'credit') {
        const idx = parseInt(e.target.value, 10);
        CURRENT.selected = CURRENT.customer.credits[idx];
        
        addDebug(`Kredit se√ßildi: ${CURRENT.selected.contract}`);
        
        formPay.style.display = 'flex';
        el('amount').value = CURRENT.selected.due.toFixed(2);
        el('note').value = '';
        el('paymentStatus').innerHTML = '';
        
        updateSummary();
      }
    });

    // ============================================
    // 3. M∆èBL∆èƒû D√úYM∆èL∆èRI
    // ============================================
    el('btnPayAll').addEventListener('click', () => {
      if (CURRENT.selected) {
        el('amount').value = CURRENT.selected.due.toFixed(2);
        addDebug(`Tam borc: ${CURRENT.selected.due.toFixed(2)} AZN`);
      }
    });

    el('btn5').addEventListener('click', () => bump(5));
    el('btn10').addEventListener('click', () => bump(10));
    el('btn50').addEventListener('click', () => bump(50));

    function bump(x) {
      const v = parseFloat(el('amount').value || 0);
      el('amount').value = (isFinite(v) ? v : 0) + x;
      addDebug(`M…ôbl…ôƒü artƒ±rƒ±ldƒ± +${x}: ${el('amount').value} AZN`);
    }

    // ============================================
    // 4. NUMPAD (R∆èQ∆èM KLAVƒ∞ATURASI)
    // ============================================
    el('numpad').addEventListener('click', (e) => {
      if (!e.target.classList.contains('key')) return;
      
      const amountInput = el('amount');
      
      // Sil d√ºym…ôsi (‚å´)
      if (e.target.hasAttribute('data-del')) {
        amountInput.value = (amountInput.value + '').slice(0, -1);
        addDebug(`R…ôq…ôm silindi: ${amountInput.value}`);
        return;
      }
      
      const key = e.target.textContent.trim();
      
      // 00 d√ºym…ôsi
      if (key === '00') {
        amountInput.value = (amountInput.value || '') + '00';
        addDebug(`00 …ôlav…ô edildi: ${amountInput.value}`);
        return;
      }
      
      // R…ôq…ôm d√ºym…ôl…ôri
      amountInput.value = (amountInput.value || '') + key;
      addDebug(`R…ôq…ôm …ôlav…ô edildi (${key}): ${amountInput.value}`);
    });

    // ============================================
    // 5. √ñD∆èNƒ∞≈û PROSESƒ∞
    // ============================================
    formPay.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      if (!CURRENT.selected) {
        alert('‚ö† Z…ôhm…ôt olmasa kredit se√ßin');
        return;
      }
      
      const amt = parseFloat(el('amount').value);
      
      if (!Number.isFinite(amt) || amt <= 0) {
        alert('‚ö† M…ôbl…ôƒüi d√ºzg√ºn daxil edin (m…ôs…ôl…ôn: 100.50)');
        return;
      }

      const statusDiv = el('paymentStatus');
      const btnPay = el('btnPay');
      
      try {
        addDebug(`=== √ñD∆èNƒ∞≈û BA≈ûLADI ===`);
        addDebug(`M…ôbl…ôƒü: ${amt.toFixed(2)} AZN`);
        addDebug(`M√ºqavil…ô: ${CURRENT.selected.contract}`);
        
        // √ñd…ôni≈ü prosesi
        statusDiv.innerHTML = '<div class="status info">‚è≥ √ñd…ôni≈ü ba≈üladƒ±...</div>';
        const paymentResult = await processPayment(amt);
        
        if (paymentResult.success) {
          statusDiv.innerHTML = '<div class="status success">‚úì √ñd…ôni≈ü q…ôbul edildi! Q…ôbz √ßap olunur...</div>';
          
          addDebug('‚úì √ñd…ôni≈ü uƒüurla tamamlandƒ±');
          addDebug(`UUID: ${paymentResult.uuid}`);
          addDebug(`√ñd…ônil…ôn: ${paymentResult.paid.toFixed(2)} AZN`);
          
          // Q…ôbz m…ôlumatlarƒ±
          const receipt = {
            time: new Date().toISOString(),
            customer: CURRENT.customer.fullName,
            contract: CURRENT.selected.contract,
            bank: CURRENT.selected.bank,
            paid: amt,
            note: el('note').value,
            transaction_id: paymentResult.uuid
          };
          
          addDebug('=== Q∆èBZ √áAP OLUNUR ===');
          
          // Q…ôbz √ßap et
          const printResult = await printReceipt(receipt);
          
          if (printResult.success) {
            addDebug('‚úì Q…ôbz uƒüurla √ßap olundu');
            statusDiv.innerHTML = '<div class="status success">‚úì‚úì √ñd…ôni≈ü tamamlandƒ± v…ô q…ôbz √ßap olundu!<br>3 saniy…ô sonra ana s…ôhif…ôy…ô y√∂nl…ôndirilirsiniz...</div>';
            
            // 3 saniy…ô geri sayƒ±m
            let countdown = 3;
            const countdownInterval = setInterval(() => {
              countdown--;
              if (countdown > 0) {
                statusDiv.innerHTML = `<div class="status success">‚úì‚úì √ñd…ôni≈ü tamamlandƒ± v…ô q…ôbz √ßap olundu!<br>${countdown} saniy…ô sonra ana s…ôhif…ôy…ô y√∂nl…ôndirilirsiniz...</div>`;
              } else {
                clearInterval(countdownInterval);
                addDebug('Ana s…ôhif…ôy…ô y√∂nl…ôndirilir...');
                window.location.href = 'index.html';
              }
            }, 1000);
          } else {
            addDebug(`‚ö† √áap x…ôtasƒ±: ${printResult.error}`);
            statusDiv.innerHTML = '<div class="status error">‚ö† √ñd…ôni≈ü oldu, lakin q…ôbz √ßap edilm…ôdi!<br>Administratorla …ôlaq…ô saxlayƒ±n.<br>3 saniy…ô sonra ana s…ôhif…ôy…ô y√∂nl…ôndirilirsiniz...</div>';
            
            // √áap x…ôtasƒ± olsa bel…ô 3 saniy…ô sonra ana s…ôhif…ôy…ô y√∂nl…ôndir
            setTimeout(() => {
              addDebug('Ana s…ôhif…ôy…ô y√∂nl…ôndirilir (√ßap x…ôtasƒ±)');
              window.location.href = 'index.html';
            }, 3000);
          }
        }
      } catch (error) {
        addDebug(`‚úó‚úó X∆èTA: ${error.message}`);
        statusDiv.innerHTML = `<div class="status error">‚úó X…ôta: ${error.message}<br>Z…ôhm…ôt olmasa yenid…ôn c…ôhd edin v…ô ya administratorla …ôlaq…ô saxlayƒ±n.</div>`;
        btnPay.disabled = false;
      }
    });

    // ============================================
    // 6. GERƒ∞ D√úYM∆èSI
    // ============================================
    el('btnBack').addEventListener('click', () => {
      addDebug('Geri d√ºym…ôsi basƒ±ldƒ± - √∂d…ôni≈ü formasƒ± baƒülandƒ±');
      
      formPay.style.display = 'none';
      document.querySelectorAll('input[name="credit"]').forEach(r => r.checked = false);
      CURRENT.selected = null;
      el('amount').value = '';
      el('note').value = '';
      el('paymentStatus').innerHTML = '';
      updateSummary();
    });

    // ============================================
    // 7. X√úLAS∆è YENƒ∞L∆èM∆èSƒ∞
    // ============================================
    function updateSummary() {
      el('selContract').textContent = CURRENT.selected ? CURRENT.selected.contract : '‚Äî';
      el('bankName').textContent = CURRENT.selected ? CURRENT.selected.bank : '‚Äî';
      el('namePreview').textContent = CURRENT.customer ? CURRENT.customer.fullName : '‚Äî';
      el('due').textContent = CURRENT.selected ? `${CURRENT.selected.due.toFixed(2)} ‚Çº` : '‚Äî';
    }

    // ============================================
    // 8. S∆èHIF∆è Y√úKL∆èNDƒ∞KD∆è
    // ============================================
    window.addEventListener('DOMContentLoaded', async () => {
      addDebug('========================================');
      addDebug('KREDƒ∞T √ñD∆èNƒ∞≈û Kƒ∞OSKU BA≈ûLADI');
      addDebug('========================================');
      addDebug(`Printer URL: ${PRINTER_BASE_URL}`);
      addDebug(`Hardware URL: ${HARDWARE_BASE_URL}`);
      addDebug(`Printer ID: ${PRINTER_ID}`);
      addDebug('----------------------------------------');

      const appBackBtn = document.getElementById('btnAppBack');
      if (appBackBtn) {
        appBackBtn.addEventListener('click', navigateHome);
      }

      const footerBackBtn = document.getElementById('btnFooterBack');
      if (footerBackBtn) {
        footerBackBtn.addEventListener('click', navigateHome);
      }

      updatePrinterStatusPill(null, 'Printer yoxlanƒ±lƒ±r...');

      // Printer status yoxla
      const printerStatus = await checkPrinterStatus();

      if (printerStatus.success) {
        addDebug('‚úì Sistem hazƒ±rdƒ±r - √∂d…ôni≈ü q…ôbul edil…ô bil…ôr');
      } else {
        console.warn('‚ö† Printer x…ôtasƒ±:', printerStatus.message);
        addDebug('‚ö† Printer problemi var - q…ôbzl…ôr √ßap olunmaya bil…ôr');
      }
      
      addDebug('========================================');
    });

    // ============================================
    // 9. B√ñY√úK T∆èQVƒ∞M (FLATPICKR)
    // ============================================
    // Not: Flatpickr kitabxanasƒ± s…ôhif…ônin sonunda y√ºkl…ônir
  </script>

  <!-- Flatpickr (T…ôqvim Kitabxanasƒ±) -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    (function() {
      const dobInput = document.getElementById('dob');
      if (!dobInput) return;
      
      try {
        // Input tipini text-…ô √ßevir (Flatpickr √º√ß√ºn)
        dobInput.setAttribute('type', 'text');
      } catch (e) {
        console.warn('Input tipi d…ôyi≈üdiril…ô bilm…ôdi:', e);
      }
      
      // Flatpickr t…ôqvimi aktiv et
      flatpickr(dobInput, {
        dateFormat: "Y-m-d",
        defaultDate: dobInput.value || null,
        allowInput: true,
        disableMobile: false,
        clickOpens: true,
        position: "auto center",
        locale: {
          firstDayOfWeek: 1,
          weekdays: {
            shorthand: ['B', 'Be', '√áa', '√á', 'Ca', 'C', '≈û'],
            longhand: ['Bazar', 'Bazar ert…ôsi', '√á…ôr≈ü…ônb…ô ax≈üamƒ±', '√á…ôr≈ü…ônb…ô', 'C√ºm…ô ax≈üamƒ±', 'C√ºm…ô', '≈û…ônb…ô']
          },
          months: {
            shorthand: ['Yan', 'Fev', 'Mar', 'Apr', 'May', 'ƒ∞yn', 'ƒ∞yl', 'Avq', 'Sen', 'Okt', 'Noy', 'Dek'],
            longhand: ['Yanvar', 'Fevral', 'Mart', 'Aprel', 'May', 'ƒ∞yun', 'ƒ∞yul', 'Avqust', 'Sentyabr', 'Oktyabr', 'Noyabr', 'Dekabr']
          }
        }
      });
      
      console.log('‚úì T…ôqvim (Flatpickr) aktiv edildi');
    })();
  </script>
</body>
</html>
